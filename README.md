Тестовое задание.
Предметом тестового задания является проверка владения минимальными знаниями
языка программирования C++, структур данных, алгоритмов, умение разбираться и
пользоваться сторонними библиотекам, работать с файлами.
Описание задания.
Требуется написать консольное приложение для конвертации изображений (текстур)
произвольного формата и размера во внутренний формат проприетарный формат.
Приложение должно работать под операционной системой Linux (Ubuntu 18.04). Windows
версия не обязательна, но будет являться плюсом.
Форматы исходных изображений строго не регламентированы, но должна
гарантироваться поддержка форматов: OpenEXR, PNG, JPEG.
В выходном изображении (текстуре) помимо обработанных исходных данных должны
сохраняться данный уменьшенной версии исходного изображения до тех пор пока
изображение не будет иметь размер меньше чем 2x2 пикселя. К примеру если исходное
изображение имело размер 512x512 пикселей, последовательно сохраняются данные
изображения 512x512, затем 256x256, 128x128, 64x64, 32x32 ... и так далее. Каждое такой
вариент изображения (исходный и его уменьшенные копии) называется MIP уровень, где
исходное изобрадение есть уровень MIP 0. Далее следуют уровни MIP 1, 2, 3 и так далее.
Всего может быть не более 16 уровней MIP 0 - MIP 15. При этом размеры исходного
изображения (текстуры) не обязательно являются степенями двойки и ширина
изображения не обязана быть равной высоте.
Количество каналов исходного изображения может быть от одного до четырех. Примеры:
R, RG, RGB, RGBA.
Битность каналов изображения так же может быть произвольной, 8 бит целочисленный
цвет, 16 бит целочисленный цвет, 16 бит с плавающей точкой (формат Half) и 32 бит с
плавающей точкой. Рамках тестового задания все каналы обладают одинаковой
битностью. То-есть исли исходное изображение имеет 4 RGBA канала и битность 8, то
пиксель занимает 32 бита памяти. Другие более экзотические форматы игнорируем.
Каждый MIP уровень исходного изображения разбивается на страницы по 64кб, при этом
разрешение фрагметна такой страницы зависит от битности и количества каналов
исходного изображения. Изображение делится на старницы геометрически, а не по
расположению в памяти. К примеру если исходное изображение имело размеры 512х512
пикселей, а страница при текущей битности пикселя не может хранить больще чем 64x64
пикселя, то первая страница хранит квадратную область изображения с координатами [0:0
- 63:63], вторая [64:0 - 127:63] и так далее поа не будет обработан первый ряд страниц,
потом идут страницы [0:64 - 63:127] [ 64:64 - 127:127] и так далее до конца текущего MIP

уровня. Некоторые страницы могут быть не полностью заполнены данными
соответсвующего региона MIP уровня. Не использованные байты такой страницы
заполняются нулями для сжатия. Данные в такой, не полностью заполенной 64кб ,
страницы располагаются последовательно без пропусков памяти, а оставшаяся память
заполняется нулями.
Выходное изображение должно сохранять исходную битность и количество каналов.

Описание выходного формата.
Выходной файл состоит из заголовка и данных страниц которые следуют
непосредственно за ним.
Заголовок.
Заголовком выходного файла является структура содержащая следующие поля.
1. 12 байт magiс number.
2. Время последнего изменения файла исзодного изображения с типом time_t.
3. Ширина исходного изображения типа uint32_t;
4. Высота исходного изображения типа uin32_t;
5. Глубина исходного изображения типа uint32_t; (в нашем случае всегда равна 1)
6. Разрешение страниц (единое для всех страниц). Структкра с тремя полями
(ширина, высота, глубина) типа uint16_t. Глубина всегда равна 1.
7. Общее количество страниц типа uint32_t;
8. Колчество байт в странице (общее для всех). В нашем случае всегда 65536. Тип
uint32_t.
9. Количество слоев изображения типа uint32_t. В нашем случае всегда 1.
10. Число MIP уровней изображения. Тип uint8_t.
11. Номер MIP уровня начиная с которого остальные MIP уровни занимают не более
одной страницы. Такие уровни называются MIP tail. Тип uint8_t.
12. Смещение в байтах относительно конца заголовка с которого начинаются данные
MIP tail. Тип uint32_t.
13. Число байт данных всех MIP tail уровней. Тип uint32_t.
14. Массив из 16 элементов uint32_t хранящий индекс первой страницы для каждого
MIP уровня.
15. Формат исходных данных (число каналов и тип). Enum 32 bit.
16. Флаги uint8_bit. В задании не импользуются.
17. Цветовая компрессия. Структура из двух полей uint8_t. В рамках задания не
используем.
18. Тип компресии страниц. uint8_t. В задании не используется. Выставляем в 0.
19. Cтепень компресии старниц от 0 до 9. uint8_t. В задании не испльзуется.

20. Смещение на начало данных в файле типа uint32_t. Если не используем
компрессию равно размеру заголовка.
Magic number.
Magic number заголовка выходного файла имеет размер 12 байт.
Байт 0: специальное значение 0xAB
Байты [1 - 3]: расширение файла заглавными буквами. Например: ['L', 'T', 'X']
Байты [4 - 6]: три байта версии формата [major, minor, build]
Байт 7: специальное значение 0xBB
Байты [8 - 11] : специальные значения ['\r', '\n', '\x1A', '\n']